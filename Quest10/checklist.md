# Check-List

## 쿠키란 무엇일까요?

클라이언트의 로컬에 키-값 쌍으로 저장되는 데이터

### 쿠키는 어떤 식으로 동작하나요?

서버에 요청할 때마다 요청 헤더에 포함되며, 서버가 설정해준 유효기간(Expires)만큼 살아있다가 유효기간이 지나면 삭제된다.

### 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?

1. 서버에서 응답 헤더에 `Set-Cookie: 키=값` 형태로 클라이언트가 저장할 쿠키를 전송한다.
2. 클라이언트는 `Set-Cookie` 헤더에 있는 쿠키값들을 저장한다.
3. 다음에 다시 같은 서버에 요청할 때 요청 헤더에 `Cookie` 헤더를 만들어서 저장해놓았던 쿠키 값들을 전송한다.

## 웹 어플리케이션의 세션이란 무엇일까요?

세션은 클라이언트와 서버의 연결을 유지하는 것이다.

### 세션의 ID와 내용은 각각 어디에 저장되고 어떻게 서버와 교환되나요?

- 보통 세션의 ID는 쿠키에 저장이 되고, 세션의 내용은 서버에 저장된다.
  - 세션 종료과 함께 소멸되는 `Memory cookie` 타입이 사용된다.
- 인증에 성공하여 서버로부터 세션 ID를 쿠키로 받으면, 다음 요청부터 쿠키를 통해 세션 ID를 서버로 넘기고, 서버는 해당 세션 ID와 매핑되는 유저의 정보를 찾아서 적절한 응답을 한다.

## JWT란 무엇인가요?

JSON Web Token의 약자로, JSON 포맷을 사용하여 사용자에 대한 정보를 저장하는 Web Token이다. 토큰 자체를 정보로 사용하는 Self-Contained 방식이 사용된다.

JWT의 구조는 크게 세 부분으로 나뉜다. JSON 형태의 각 부분은 Base64로 인코딩되어 표현되며, 각 부분의 구분을 위해 `.`을 사용한다.

- Header : 토큰의 타입을 지정하는 `typ`와 Signature 해싱 알고리즘을 나타내는 `alg`로 구성되어 있다.

  ```json
  {
    "typ": "JWT",
    "alg": "HA256"
  }
  ```

- Payload : 토큰에서 사용할 정보인 클레임이 담겨있다. 등록된 클레임, 공개 클레임, 비공개 클레임으로 이루어져 있다.

  ```json
  {
    "sub": "01012345678",
    "iat": 1592948833451,
    "email": "example@example.com"
  }
  ```

- Signature : 토큰 인코딩, 유효성 검증에 사용되는 고유한 암호화 코드

  ```
  해시알고리즘(
  	base64UrlEncode(header) + '.' +
  	base64UrlEncode(payload),
  	secretKey
  )
  ```

### JWT 토큰은 어디에 저장되고 어떻게 서버와 교환되나요?

- 쿠키에 저장하는 방식 : 주로 http-only 옵션이 붙어서 클라이언트가 요청할 때 자동으로 Cookie 헤더에 포함되어 서버에 전송된다.
- 로컬 스토리지에 저장하는 방식 : 로컬 스토리지에서 토큰을 가져와서 Authorization 헤더에 전송한다.

## 세션에 비해 JWT가 가지는 장점은 무엇인가요? 또 JWT에 비해 세션이 가지는 장점은 무엇인가요?

- 세션에 비해 JWT가 가지는 장점
  - JWT는 Self-Contained 방식이기 때문에 사용자에 대한 정보를 서버에 저장할 필요가 없다. (리소스 절약)
  - 인증 정보를 가지고 있는 특정 서버에 트래픽이 몰릴 일이 없기 때문에 서버 부하가 적다.
  - 세션은 만약 같은 서버를 여러 개 만들었다면 서버들이 서로의 세션 정보를 동기화하거나 하나의 공유 저장소를 만들어야 한다. JWT는 서버들이 시크릿 키만 공유하고 있으면 문제가 없다.
- JWT에 비해 세션이 가지는 장점
  - JWT는 Self-Contained 방식이기 때문에 중간에서 데이터를 열어볼 수 있다. 때문에 민감한 정보는 포함할 수가 없다. 
  - 세션은 서버에서 관리를 하기 때문에 문제가 생겨도 서버에서 조치를 취할 수 있지만 JWT는 한 번 발행을 하면 더 이상 서버에서 관여할 수가 없다.

# Advanced

## Web Authentication API(WebAuthn)은 무엇인가요?

The Fast ID Online Allliance와 World Wide Web Consortium에서 암호를 대체하기 위해 만든 새로운 웹 표준 (Public key 기반의 인증)

- 내장 인증 : 지문인식, 얼굴인식, 모바일 핀번호 -> OS 레벨에서 구현되어 있어야 하므로 스마트폰 단말에서 주로 사용한다.
- 외부 인증 : USB/NFC/블루투스 방식의 하드웨어 보안키, 전용 인증 어플

